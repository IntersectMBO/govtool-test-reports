{"uid":"26bb1b6cb5dd4846","name":"test_epoch_boundary","fullName":"test_cases.test_proposal#test_epoch_boundary","historyId":"89725d94006ff28012f2f63e914a3f9d","time":{"start":1732643089705,"stop":1732643090040,"duration":335},"status":"failed","statusMessage":"AssertionError: Time difference is greater than 10 minutes: 233 days, 0:29:30\nassert datetime.timedelta(days=233, seconds=1770) <= datetime.timedelta(seconds=600)","statusTrace":"govtool_api = <lib.govtool_api.GovToolApi object at 0x7f5d3c52a310>\n\n    @allure.story(\"Proposal\")\n    def test_epoch_boundary(govtool_api):\n        query_system = kuber_api.get_query_system_start()\n        epochParams = govtool_api.epoch_params().json()\n        gov_action_lifetime = epochParams['gov_action_lifetime']\n    \n        response = govtool_api.proposal_list()\n        proposal_list = response.json()\n        for proposal in proposal_list[\"elements\"]:\n            assert validate_expiry_epoch(proposal,gov_action_lifetime)\n>           assert validate_expiry_date(proposal,gov_action_lifetime,query_system)\n\ntest_cases/test_proposal.py:74: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nproposal = {'abstract': None, 'ccAbstainVotes': 0, 'ccNoVotes': 0, 'ccYesVotes': 0, ...}\ngov_action_lifetime = 30\nquery_system = {'activeSlotsCoefficient': {'denominator': 20, 'numerator': 1}, 'epochLength': 86400, 'initialUpdateableProtocolParame... 1, 'extraPraosEntropy': None, 'maxBlockBodySize': 65536, 'maxBlockHeaderSize': 1100, ...}, 'maxKesEvolution': 62, ...}\n\n    def validate_expiry_date(proposal, gov_action_lifetime, query_system) -> bool:\n        actual_expiry_date = proposal['expiryDate']\n        actual_expiry_date_in_datetime_format = datetime.strptime(actual_expiry_date, \"%Y-%m-%dT%H:%M:%SZ\")\n    \n        # Calculate the expected expiry date\n        epoch_length = query_system['epochLength']\n        created_epoch_no = proposal['createdEpochNo']\n        start_time_of_0_epoch = query_system['systemStartTime']\n        added_seconds = (created_epoch_no + 1 + gov_action_lifetime) * epoch_length\n    \n        # Parse the start time of epoch 0 and add the calculated seconds\n        expected_expiry_date = datetime.strptime(start_time_of_0_epoch, \"%Y-%m-%dT%H:%M:%SZ\") + timedelta(seconds=added_seconds)\n    \n        max_time_difference = timedelta(minutes=10)\n        time_difference = abs(expected_expiry_date - actual_expiry_date_in_datetime_format)\n    \n        # Assert that the difference is not greater than 10 minutes\n>       assert time_difference <= max_time_difference, f\"Time difference is greater than 10 minutes: {time_difference}\"\nE       AssertionError: Time difference is greater than 10 minutes: 233 days, 0:29:30\nE       assert datetime.timedelta(days=233, seconds=1770) <= datetime.timedelta(seconds=600)\n\ntest_cases/test_proposal.py:43: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"govtool_api","time":{"start":1732643078449,"stop":1732643078449,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"afterStages":[{"name":"govtool_api::0","time":{"start":1732643090043,"stop":1732643090043,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"story","value":"Proposal"},{"name":"parentSuite","value":"test_cases"},{"name":"suite","value":"test_proposal"},{"name":"host","value":"fv-az566-8"},{"name":"thread","value":"1785-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"test_cases.test_proposal"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":0,"passed":17,"unknown":0,"total":19},"items":[{"uid":"9385c49095954db9","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/64//#testresult/9385c49095954db9","status":"failed","statusDetails":"AssertionError: Time difference is greater than 10 minutes: 233 days, 0:29:30\nassert datetime.timedelta(days=233, seconds=1770) <= datetime.timedelta(seconds=600)","time":{"start":1732624821067,"stop":1732624821612,"duration":545}},{"uid":"6d322d065778a1c5","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/63//#testresult/6d322d065778a1c5","status":"passed","time":{"start":1732009995144,"stop":1732009995937,"duration":793}},{"uid":"81bfe3cf0753a243","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/62//#testresult/81bfe3cf0753a243","status":"passed","time":{"start":1732003566343,"stop":1732003566879,"duration":536}},{"uid":"85793bc6101b8df3","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/61//#testresult/85793bc6101b8df3","status":"passed","time":{"start":1730994112694,"stop":1730994113184,"duration":490}},{"uid":"ae37300f9d1d49d9","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/60//#testresult/ae37300f9d1d49d9","status":"passed","time":{"start":1730737533487,"stop":1730737534300,"duration":813}},{"uid":"cb85e225b938384e","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/59//#testresult/cb85e225b938384e","status":"passed","time":{"start":1730459893537,"stop":1730459894320,"duration":783}},{"uid":"7c52ee72d8f8de6c","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/58//#testresult/7c52ee72d8f8de6c","status":"passed","time":{"start":1730396891819,"stop":1730396892467,"duration":648}},{"uid":"35e8232492c2c940","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/57//#testresult/35e8232492c2c940","status":"passed","time":{"start":1730368210106,"stop":1730368210613,"duration":507}},{"uid":"c0ad4ee264d350c5","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/56//#testresult/c0ad4ee264d350c5","status":"passed","time":{"start":1730213453026,"stop":1730213453706,"duration":680}},{"uid":"ae7fc9556b2cb8c","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/55//#testresult/ae7fc9556b2cb8c","status":"passed","time":{"start":1730213112116,"stop":1730213112594,"duration":478}},{"uid":"6a217a0fb66eea57","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/54//#testresult/6a217a0fb66eea57","status":"passed","time":{"start":1730197236960,"stop":1730197237795,"duration":835}},{"uid":"c2d086ce082b6b8e","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/53//#testresult/c2d086ce082b6b8e","status":"passed","time":{"start":1730128836097,"stop":1730128836629,"duration":532}},{"uid":"dbb20eb229253ae3","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/52//#testresult/dbb20eb229253ae3","status":"passed","time":{"start":1729809165725,"stop":1729809166056,"duration":331}},{"uid":"4bf9a0a948eeee14","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/51//#testresult/4bf9a0a948eeee14","status":"passed","time":{"start":1729781854391,"stop":1729781854936,"duration":545}},{"uid":"b692fc067724f4b6","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/50//#testresult/b692fc067724f4b6","status":"passed","time":{"start":1729772695626,"stop":1729772696132,"duration":506}},{"uid":"ee40a6481699a392","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/49//#testresult/ee40a6481699a392","status":"passed","time":{"start":1729764903333,"stop":1729764903638,"duration":305}},{"uid":"221bc2ac2353b466","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/48//#testresult/221bc2ac2353b466","status":"passed","time":{"start":1729674873186,"stop":1729674873680,"duration":494}},{"uid":"26a597f319ab91f7","reportUrl":"https://IntersectMBO.github.io/govtool-test-reports/govtool-backend/47//#testresult/26a597f319ab91f7","status":"passed","time":{"start":1729575421760,"stop":1729575422272,"duration":512}}]},"tags":[]},"source":"26bb1b6cb5dd4846.json","parameterValues":[]}